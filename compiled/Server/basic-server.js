'use strict';

var express = require('express');
var dbHelpers = require('../DB/databaseHelpers.js');
var bodyParser = require('body-parser');
var app = express();

app.use(bodyParser.json());
app.use(express.static('/users/mr.nick/development/hackreactor/MVP'));

app.get('/urls', function (req, res) {
  console.log('getting urls now');
  dbHelpers.getAllUrls(function (err, data) {
    if (err) {
      throw err;
    }
    console.log(data);
    res.send(data);
  });
});

//Add url to database
app.post('/add', function (req, res) {
  console.log('we want to get:', req.body);
  dbHelpers.saveUrlToDatabase(req.body.url, function (err, data) {
    if (err) {
      throw err;
    }
    console.log(data);
    res.send(data);
  });
});

//Remove url from database
app.post('/delete', function (req, res) {
  console.log('we want to delete:', req.body);
  dbHelpers.deleteUrlFromDatabase(req.body.url, function (err, data) {
    if (err) {
      throw err;
    }
    console.log(data);
    res.send(data);
  });
});

app.listen(3000, function () {
  return console.log('listening on port 3000');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1NlcnZlci9iYXNpYy1zZXJ2ZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJkYkhlbHBlcnMiLCJib2R5UGFyc2VyIiwiYXBwIiwidXNlIiwianNvbiIsInN0YXRpYyIsImdldCIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJnZXRBbGxVcmxzIiwiZXJyIiwiZGF0YSIsInNlbmQiLCJwb3N0IiwiYm9keSIsInNhdmVVcmxUb0RhdGFiYXNlIiwidXJsIiwiZGVsZXRlVXJsRnJvbURhdGFiYXNlIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFVBQVVDLFFBQVEsU0FBUixDQUFoQjtBQUNBLElBQU1DLFlBQVlELFFBQVEsMEJBQVIsQ0FBbEI7QUFDQSxJQUFNRSxhQUFhRixRQUFRLGFBQVIsQ0FBbkI7QUFDQSxJQUFNRyxNQUFNSixTQUFaOztBQUVBSSxJQUFJQyxHQUFKLENBQVFGLFdBQVdHLElBQVgsRUFBUjtBQUNBRixJQUFJQyxHQUFKLENBQVFMLFFBQVFPLE1BQVIsQ0FBZSw0Q0FBZixDQUFSOztBQUVBSCxJQUFJSSxHQUFKLENBQVEsT0FBUixFQUFpQixVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM3QkMsVUFBUUMsR0FBUixDQUFZLGtCQUFaO0FBQ0FWLFlBQVVXLFVBQVYsQ0FBc0IsVUFBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQWU7QUFDbkMsUUFBSUQsR0FBSixFQUFTO0FBQ1AsWUFBTUEsR0FBTjtBQUNEO0FBQ0RILFlBQVFDLEdBQVIsQ0FBWUcsSUFBWjtBQUNBTCxRQUFJTSxJQUFKLENBQVNELElBQVQ7QUFDRCxHQU5EO0FBT0QsQ0FURDs7QUFXQTtBQUNBWCxJQUFJYSxJQUFKLENBQVMsTUFBVCxFQUFpQixVQUFDUixHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM3QkMsVUFBUUMsR0FBUixDQUFZLGlCQUFaLEVBQStCSCxJQUFJUyxJQUFuQztBQUNBaEIsWUFBVWlCLGlCQUFWLENBQTRCVixJQUFJUyxJQUFKLENBQVNFLEdBQXJDLEVBQTBDLFVBQUNOLEdBQUQsRUFBTUMsSUFBTixFQUFlO0FBQ3ZELFFBQUlELEdBQUosRUFBUztBQUNQLFlBQU1BLEdBQU47QUFDRDtBQUNESCxZQUFRQyxHQUFSLENBQVlHLElBQVo7QUFDQUwsUUFBSU0sSUFBSixDQUFTRCxJQUFUO0FBQ0QsR0FORDtBQU9ELENBVEQ7O0FBV0E7QUFDQVgsSUFBSWEsSUFBSixDQUFTLFNBQVQsRUFBb0IsVUFBQ1IsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDaENDLFVBQVFDLEdBQVIsQ0FBWSxvQkFBWixFQUFrQ0gsSUFBSVMsSUFBdEM7QUFDQWhCLFlBQVVtQixxQkFBVixDQUFnQ1osSUFBSVMsSUFBSixDQUFTRSxHQUF6QyxFQUE4QyxVQUFDTixHQUFELEVBQU1DLElBQU4sRUFBZTtBQUMzRCxRQUFJRCxHQUFKLEVBQVM7QUFDUCxZQUFNQSxHQUFOO0FBQ0Q7QUFDREgsWUFBUUMsR0FBUixDQUFZRyxJQUFaO0FBQ0FMLFFBQUlNLElBQUosQ0FBU0QsSUFBVDtBQUNELEdBTkQ7QUFPRCxDQVREOztBQVdBWCxJQUFJa0IsTUFBSixDQUFXLElBQVgsRUFBaUI7QUFBQSxTQUFNWCxRQUFRQyxHQUFSLENBQVksd0JBQVosQ0FBTjtBQUFBLENBQWpCIiwiZmlsZSI6ImJhc2ljLXNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBkYkhlbHBlcnMgPSByZXF1aXJlKCcuLi9EQi9kYXRhYmFzZUhlbHBlcnMuanMnKTtcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJy91c2Vycy9tci5uaWNrL2RldmVsb3BtZW50L2hhY2tyZWFjdG9yL01WUCcpKTtcblxuYXBwLmdldCgnL3VybHMnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coJ2dldHRpbmcgdXJscyBub3cnKVxuICBkYkhlbHBlcnMuZ2V0QWxsVXJscyggKGVyciwgZGF0YSkgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmVzLnNlbmQoZGF0YSk7XG4gIH0pO1xufSlcblxuLy9BZGQgdXJsIHRvIGRhdGFiYXNlXG5hcHAucG9zdCgnL2FkZCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZygnd2Ugd2FudCB0byBnZXQ6JywgcmVxLmJvZHkpO1xuICBkYkhlbHBlcnMuc2F2ZVVybFRvRGF0YWJhc2UocmVxLmJvZHkudXJsLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICByZXMuc2VuZChkYXRhKTtcbiAgfSk7XG59KTtcblxuLy9SZW1vdmUgdXJsIGZyb20gZGF0YWJhc2VcbmFwcC5wb3N0KCcvZGVsZXRlJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCd3ZSB3YW50IHRvIGRlbGV0ZTonLCByZXEuYm9keSk7XG4gIGRiSGVscGVycy5kZWxldGVVcmxGcm9tRGF0YWJhc2UocmVxLmJvZHkudXJsLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICByZXMuc2VuZChkYXRhKTtcbiAgfSk7XG59KTtcblxuYXBwLmxpc3RlbigzMDAwLCAoKSA9PiBjb25zb2xlLmxvZygnbGlzdGVuaW5nIG9uIHBvcnQgMzAwMCcpKTtcbiJdfQ==